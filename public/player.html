
<!DOCTYPE html>
<html>
        <head>
        <title>Spotify Web Playback SDK Quick Start</title>
        </head>
        <body>
        <h1>Spotify Web Playback SDK Quick Start</h1>
        <p1 id="trackname">current song:</p1>
        <p1 id="artistname">current song:</p1>
        <img id="image" src="" />

        <button id="togglePlay">Toggle Play</button>
        <script src="https://sdk.scdn.co/spotify-player.js"></script>
        <script>
                window.onSpotifyWebPlaybackSDKReady = () => {
                        const token = 'AQCeTb-srSpc4I81vDmaF9al3jB1cd-iwrrN8_VMKZ5DJld6v7Qh1zJt6jlclgirrkPz2D9FY5Tg88fEckI09pJKGAUYyEDIfI-hN6VktoXxufVm2P6zZHw3GUlHZlYa349dSTBw5AocQJRTmN2-F7M01SBYJVw5MXHc1pfu2DG39v-ecVbXvuWp8MKLrbWECWjh8_2gYjHWXQBfTbIKYxwZdDRjGPzErw'
                        const player = new Spotify.Player({
                                name: 'Web Playback SDK Quick Start Player',
                                getOAuthToken: cb => { cb(token); },
                                volume: 0.5
                });

                function update(changedStateEvent) {
                        console.log(changedStateEvent);
                        player.getCurrentState().then(state => {
                        if (!state) {
                                console.error('User is not playing music through the Web Playback SDK');
                                return;
                        }
                                document.getElementById("trackname").innerHTML = state.track_window.current_track['name'];
                                document.getElementById("artistname").innerHTML = state.track_window.current_track['artists'][0]['name'];
                                document.getElementById("image").src=state.track_window.current_track['album']['images'][0]['url'];
                        });
                }
                
                // Ready
                player.addListener('ready', ({ device_id }) => {
                        console.log('Ready with Device ID', device_id);
                });

                // Not Ready
                player.addListener('not_ready', ({ device_id }) => {
                        console.log('Device ID has gone offline', device_id);
                });

                player.addListener('initialization_error', ({ message }) => {
                        console.error(message);
                });

                player.addListener('authentication_error', ({ message }) => {
                        console.error(message);
                });

                player.addListener('account_error', ({ message }) => {
                        console.error(message);
                });

                document.getElementById('togglePlay').onclick = function() {
                        player.togglePlay();
                };

                player.addListener('player_state_changed', update);

                player.connect();
                }
                
        </script>
        </body>
</html>